<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="../../ztree/demo/zTreeStyle/zTreeStyle.css" rel="stylesheet"
	type="text/css" />
<script type="text/javascript"
	src="../../lib/jquery/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="../../lhgdialog/lhgcore.min.js"></script>
<script type="text/javascript" src="../../lhgdialog/lhgdialog.min.js"></script>
<script type="text/javascript" src="../../js/oaUtil.js"></script>
<script type="text/javascript" src="../../ztree/jquery.ztree-2.6.js"></script>
<script type="text/javascript">
	var DG = frameElement.lhgDG;
	var ids = J('#czid', DG.curDoc).val();
	var setting = {
		nameCol : "text",
		open : true,
		async : true,
		asyncUrl : "LimitqueryMenu.action?id=" + ids,
		checkable : true
	};
	var zTree;

	$(document).ready(function() {
		zTree = $("#tree").zTree(setting);
		DG.addBtn('ok', '确定', add);
	});

	function add() {
		var nodes = zTree.getCheckedNodes(true);
		var text = "";
		for ( var i = 0; i < nodes.length; i++) {
			text += nodes[i].menuId + ",";
		}

		var params = $("#userForm").serializeArray();
		$.post("LimitAddMenu.action?id=" + ids, {
			text : text
		}, function(data) {
			DG.curWin.location.reload();
		});
		DG.curWin.location.reload();
	}
</script>
</head>

<body>
	<center>
		<table>
			<tr>
				<td>功能模板菜单</td>
			</tr>
		</table>
		<ul id="tree" class="tree" style="width: 300px; overflow: auto;"></ul>
	</center>
</body>
</html>
