<!--添加用户-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css"
	href="../css/lpsf_form_css.css" />
<script type="text/javascript" src="../js/jquery-1.6.4.js"></script>
<script type="text/javascript" src="../lhgdialog/lhgcore.min.js"></script>
<script type="text/javascript" src="../lhgdialog/lhgdialog.min.js"></script>
<script type="text/javascript" src="../js/oaUtil.js"></script>
<script src="../js/vali/formValidator-4.1.1.js"
	type="text/javascript" charset="UTF-8"></script>
<script src="../js/vali/formValidatorRegex.js" type="text/javascript"
	charset="UTF-8"></script>
<script type="text/javascript">
	var DG = frameElement.lhgDG;
	$(document).ready(function() {
		$.formValidator.initConfig({
			onError : function(msg, obj, errorlist) {
			},
			submitAfterAjaxPrompt : '有数据正在异步验证，请稍等...',
			onShowClass : "",
			onFocusClass : "",
			onCorrectClass : ""
		});

		$("#userName").formValidator({
			onShow : "请输入用户名",
			onFocus : "至少1个长度",
			onCorrect : "输入合法"
		}).inputValidator({
			min : 1,
			empty : {
				leftEmpty : false,
				rightEmpty : false,
				emptyError : "两边不能有空符号"
			},
			onError : "不能为空,请确认"
		});
		$("#ming").formValidator({
			onShow : "请输入真实姓名",
			onFocus : "至少2个长度",
			onCorrect : "输入合法"
		}).inputValidator({
			min : 2,
			empty : {
				leftEmpty : false,
				rightEmpty : false,
				emptyError : "两边不能有空符号"
			},
			onError : "不能为空,请确认"
		});
		$("#pass").formValidator({
			onShow : "请输入密码",
			onFocus : "至少6个长度",
			onCorrect : "输入合法"
		}).inputValidator({
			min : 6,
			empty : {
				leftEmpty : false,
				rightEmpty : false,
				emptyError : "两边不能有空符号"
			},
			onError : "不能为空,请确认"
		});

		var ids = J('#czid', DG.curDoc).val();
		DG.addBtn('ok', '确定', add);
		downList('queryPosition.action', 'id', 'position_name', 'position_id');
		downList('queryDepartment.action', 'id', 'dept_name', 'department_id');
		downList('queryCompany1.action', 'id', 'company_name', 'companyId');
	});

	function add() {
		if ($.formValidator.pageIsValid("1")) {
			var params = $("#userForm").serializeArray();
			J.ajax({
				type : "POST",
				url : "addaUser.action",
				cache : false,
				data : params,
				dataType : 'json',
				success : function(json) {
					if (json.suc == 0) {
						alert(json.msg);
						return;
					} else {
						DG.curWin.location.reload();
					}
				}
			});
		}
	}
</script>
</head>

<body>
	<form id="userForm" method="post"
		style="margin: 10; text-align: center;">
		<table border="0" cellpadding="0" cellspacing="1" width="98%">		
			<tr>
				<td>单位名称</td>
				<td><select id="companyId" name="of.companyId"></select></td>
				<td><div id="companyIdTip" style="width: 280px"></div>
				</td>
			</tr>
			<tr>
				<td>部门名称</td>
				<td><select id="department_id" name="of.department_id"></select>
				</td>
				<td><div id="department_idTip" style="width: 280px"></div>
				</td>
			</tr>
			<tr>
				<td>职务名称</td>
				<td><select id="position_id" name="of.position_id"></select></td>
				<td><div id="position_idTip" style="width: 280px"></div>
				</td>
			</tr>
			<tr>
				<td>用户名</td>

				<td><input id="userName" type="text" name="of.user_name "></input>
				</td>
				<td><div id="userNameTip" style="width: 280px"></div>
				</td>
			</tr>
			<tr>
				<td>真实姓名</td>

				<td><input id="ming" type="text" name="of.ming"></input>
				</td>
				<td><div id="mingTip" style="width: 280px"></div>
				</td>
			</tr>
			<tr>
				<td>密码</td>

				<td><input id="pass" type="password" name="of.user_pass"></input>
				</td>
				<td><div id="passTip" style="width: 280px"></div>
				</td>
			</tr>
			<tr>
				<td>性别</td>
				<td colspan="2"><select name="of.user_sex">
						<option>男</option>
						<option>女</option>
				</select>
				</td>

			</tr>
			<tr>
				<td>备注</td>
				<td colspan="2"><textarea name="of.remark" style="width: 95%"
						rows="6"></textarea>
				</td>
			</tr>
			<tr>
				<td>禁用</td>
				<td colspan="2"><select name="of.prohibition">
						<option value="1">是</option>
						<option value="0">否</option>
				</select>
				</td>
			</tr>
		</table>
	</form>
</body>
</html>
